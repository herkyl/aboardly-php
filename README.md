# aboardly-client-php

Official Aboardly API library client for PHP

This library is generated by [alpaca](https://github.com/pksunkara/alpaca) and then modified by hand, hence why some things seem over engineered.

## Installation

Make sure you have [composer](https://getcomposer.org) installed.

Add the following to your composer.json

```js
{
    "require": {
        "aboardly/aboardly": "*"
    }
}
```

Update your dependencies

```bash
$ php composer.phar update
```

> This package follows the `PSR-0` convention names for its classes, which means you can easily integrate these classes loading in your own autoloader.

#### Versions

Works with [ 5.4 + ]

## Usage

```php
<?php

// This file is generated by Composer
require_once 'vendor/autoload.php';

// Then we instantiate a client (as shown below)
```

### Build a client

__Using this api without authentication gives an error__

##### Basic authentication

```php
$auth = array('username' => 'api_key', 'password' => 'api_secret');

$client = new Aboardly\Client($auth);
```

### Response information

__All the callbacks provided to an api call will recieve the response as shown below__

```php
$response = $client->klass->method('args', $methodOptions);

$response->code;
// >>> 200

$response->headers;
// >>> array('x-server' => 'apache')
```

### Customers api

##### Create/Update customer (PUT customers/:customerId)

Updates customer data. If customer does not exist it is created.

The following arguments are required:

* __customer_id__: Customer identifier - an identifier that can 1:1 match to the user in your own systems.
* __options.email__: Customer email - required
* __options__: Data about customer like first_name, last_name, email (required)

```php
$options = array('email' => 'test@foo.bar', 'name' => 'John Smith');
$response = $client->customers->upsert("customer_id", $options);
```

### Events api

##### Create event (POST customers/:customerId/events/:eventName)

Creates a new event for a customer

The following arguments are required:

* __customer_id__: Customer identifier - an identifier that can 1:1 match to the user in your own systems.
* __event_name__: Event name (e.g. logged_in, signed_up, added_funds)

```php
$response = $events->create("customer_id", "event_name");
```
